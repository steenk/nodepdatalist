/*!
 * No Dependency Datalist
 * 2013 Steen Klingberg
 * @license MIT
 */
!function(){function e(e){if(console.log("makeing nodep datalist"),e.evt||(e.evt=function(e,t){return this.addEventListener(e,t),this}),e.optionlist){for(;e.optionlist.hasChildNodes();)e.optionlist.removeChild(e.optionlist.firstChild);e.optionlist.parentNode.removeChild(e.optionlist)}var o=e.getAttribute("list"),l=n("#"+o+" option"),i=e.clientWidth,d=e.offsetLeft,s=e.offsetTop+e.clientHeight+4,a=t("div.nodep-dl-list",{style:"width: "+i+"px; left: "+d+"px; display: none; top:"+s+"px"}),l=n("#"+o+" option");e.optionlist=a;for(var r=0;r<l.length;r++)if(!l[r].hasAttribute("disabled")){var c=l[r].getAttribute("label")||l[r].textContent.trim()||l[r].value,u=t("div.nodep-dl-item.nodep-dl-visible",null,c).evt("click",function(t){t.preventDefault(),e.value=t.target.value,a.style.display="none"}).evt("mouseover",function(e){var t=a.$(".nodep-dl-selected")[0];t&&t.classList.remove("nodep-dl-selected"),e.target.classList.add("nodep-dl-selected")}).evt("mouseout",function(e){e.target.classList.remove("nodep-dl-selected")});u.value=l[r].value,a.appendChild(u),l[r].hasAttribute("selected")&&(e.value=l[r].value)}e.parentNode.insertBefore(a,e.nextSibling),e.evt("input",function(){a.style.display="";for(var t=a.childNodes,n=0;n<t.length;n++)t[n].textContent.toUpperCase().indexOf(e.value.toUpperCase())>-1?(t[n].classList.add("nodep-dl-visible"),t[n].classList.remove("nodep-dl-hidden")):(t[n].classList.remove("nodep-dl-visible"),t[n].classList.add("nodep-dl-hidden"),t[n].classList.remove("nodep-dl-selected"))}).evt("keydown",function(t){if(40===t.keyCode||38===t.keyCode){a.style.display="";var n,o=a.querySelectorAll(".nodep-dl-visible"),l=-1,i=a.$(".nodep-dl-selected");if(1===i.length)for(var d=0;d<o.length;d++)o.item(d).classList.contains("nodep-dl-selected")&&(l=d);for(var d=0;d<i.length;d++)i.item(d).classList.remove("nodep-dl-selected");l=40===t.keyCode?(l+1)%o.length:0>=l?o.length:l-1,n=o.item(l),n&&(n.classList.add("nodep-dl-selected"),n.scrollIntoView(!1))}else if(9===t.keyCode||10===t.keyCode||13===t.keyCode){var i=a.$(".nodep-dl-selected")[0];i&&(e.value=i.value,a.style.display="none")}}).evt("dblclick",function(){a.style.display=""})}if("undefined"==typeof HTMLDataListElement){var t=function(e,t,n){var o,l=e.split(/[\.#]/),i=e.split(/[^\.#]+/);l.forEach(function(e,t){0===t?o=document.createElement(e):"."===i[t]?o.classList.add(e):"#"===i[t]&&o.setAttribute("id",e)});for(var d in t)o.setAttribute(d,t[d]);return n&&o.appendChild(document.createTextNode(n)),o.$=o.querySelectorAll,o.evt=function(e,t){return this.addEventListener(e,t),this},o},n=function(e){return document.querySelectorAll(e)},o=t("style",{type:"text/css"});n("head")[0].appendChild(o),o.textContent=".nodep-dl-list {border: solid #043A6B 1px;position: absolute;max-height: 417px;z-index: 222;opacity: 0.8;background-color: #fff;overflow: scroll;}\n.nodep-dl-item {font-family: sans-serif;font-size: small;padding: 3px;-webkit-user-select: none;-moz-user-select: none;user-select: none;cursor: default;}\n.nodep-dl-item.nodep-dl-selected {background-color: #043A6B;color: #fff;}\n.nodep-dl-visible {display: block;}\n.nodep-dl-hidden {display: none;}\n";var l=window.MutationObserver||window.WebKitMutationObserver,i=new l(function(t){t.forEach(function(t){for(var n=t.addedNodes,o=0;o<n.length;o++)if(n[o]instanceof HTMLInputElement&&n[o].hasAttribute("list"))e(n[o]);else if(n[o]instanceof HTMLOptionElement){var i=n[o].parentNode;console.log("ol added "+n[o].value+" to "+i.id);for(var d=document.querySelectorAll("input[list="+i.id+"]"),s=0;s<d.length;s++)e(d[s])}else if(n[o]instanceof HTMLDataListElement){var a=new l(function(e){e.forEach(function(e){console.log(e.target+" has muted")})});a.observe(n[o],{childList:!0,attributes:!0})}})});document.addEventListener("DOMContentLoaded",function(){for(var t=n("input[list]"),o=0;o<t.length;o++)t[o].hasAttribute("list")&&e(t[o]);i.observe(document.body,{childList:!0,subtree:!0});var d=n("datalist");console.log("found "+d.length+" datalists");for(var o=0;o<d.length;o++){var s=new l(function(e){console.log(e.target+" has muted (*)")});s.observe(d[o],{childList:!0,attributes:!0})}}),window.addEventListener("click",function(e){if(!e.target.classList.contains("nodep-dl-item"))for(var t=document.querySelectorAll(".nodep-dl-list"),n=0;n<t.length;n++)t[n].style.display="none"})}}();