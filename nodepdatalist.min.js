/*!
 * No Dependency Datalist
 * Version 0.1.2
 * 2013 Steen Klingberg, Bhanu Priya
 * @license MIT
 */
!function(){function e(e){if(console.log("makeing nodep datalist"),e.evt||(e.evt=function(e,t){return this.addEventListener(e,t),this}),e.optionlist){for(;e.optionlist.hasChildNodes();)e.optionlist.removeChild(e.optionlist.firstChild);e.optionlist.parentNode.removeChild(e.optionlist)}var l=e.getAttribute("list"),o=n("#"+l+" option"),i=e.clientWidth,d=e.offsetLeft,s=e.offsetTop+e.clientHeight+4,a=t("div.nodep-dl-list",{style:"width: "+i+"px; left: "+d+"px; display: none; top:"+s+"px"}),o=n("#"+l+" option");e.optionlist=a;for(var r=0;r<o.length;r++)if(!o[r].hasAttribute("disabled")){var c=o[r].getAttribute("label")||o[r].textContent.trim()||o[r].value,p=t("div.nodep-dl-item.nodep-dl-visible",null,c).evt("click",function(t){t.preventDefault(),e.value=t.target.value,a.style.display="none"}).evt("mouseover",function(e){var t=a.$(".nodep-dl-selected")[0];t&&t.classList.remove("nodep-dl-selected"),e.target.classList.add("nodep-dl-selected")}).evt("mouseout",function(e){e.target.classList.remove("nodep-dl-selected")});p.value=o[r].value,a.appendChild(p),o[r].hasAttribute("selected")&&(e.value=o[r].value)}e.parentNode.insertBefore(a,e.nextSibling),e.evt("input",function(){a.style.display="";for(var t=a.childNodes,n=0;n<t.length;n++)t[n].textContent.toUpperCase().indexOf(e.value.toUpperCase())>-1?(t[n].classList.add("nodep-dl-visible"),t[n].classList.remove("nodep-dl-hidden")):(t[n].classList.remove("nodep-dl-visible"),t[n].classList.add("nodep-dl-hidden"),t[n].classList.remove("nodep-dl-selected"))}).evt("keydown",function(t){if(40===t.keyCode||38===t.keyCode){a.style.display="";var n,l=a.querySelectorAll(".nodep-dl-visible"),o=-1,i=a.$(".nodep-dl-selected");if(1===i.length)for(var d=0;d<l.length;d++)l.item(d).classList.contains("nodep-dl-selected")&&(o=d);for(var d=0;d<i.length;d++)i.item(d).classList.remove("nodep-dl-selected");o=40===t.keyCode?(o+1)%l.length:0>=o?l.length:o-1,n=l.item(o),n&&(n.classList.add("nodep-dl-selected"),n.scrollIntoView(!1))}else if(9===t.keyCode||10===t.keyCode||13===t.keyCode){var i=a.$(".nodep-dl-selected")[0];i&&(e.value=i.value,a.style.display="none")}}).evt("blur",function(e){a.style.display=null===e.relatedTarget?"":"none"}).evt("dblclick",function(){a.style.display=""})}if("undefined"==typeof HTMLDataListElement){var t=function(e,t,n){var l,o=e.split(/[\.#]/),i=e.split(/[^\.#]+/);o.forEach(function(e,t){0===t?l=document.createElement(e):"."===i[t]?l.classList.add(e):"#"===i[t]&&l.setAttribute("id",e)});for(var d in t)l.setAttribute(d,t[d]);return n&&l.appendChild(document.createTextNode(n)),l.$=l.querySelectorAll,l.evt=function(e,t){return this.addEventListener(e,t),this},l},n=function(e){return document.querySelectorAll(e)},l=t("style",{type:"text/css"});n("head")[0].appendChild(l),l.textContent=".nodep-dl-list {border: solid #043A6B 1px;position: absolute;max-height: 417px;z-index: 222;opacity: 0.8;background-color: #fff;overflow: scroll;}\n.nodep-dl-item {font-family: sans-serif;font-size: small;padding: 3px;-webkit-user-select: none;-moz-user-select: none;user-select: none;cursor: default;}\n.nodep-dl-item.nodep-dl-selected {background-color: #043A6B;color: #fff;}\n.nodep-dl-visible {display: block;}\n.nodep-dl-hidden {display: none;}\n";var o=window.MutationObserver||window.WebKitMutationObserver,i=new o(function(t){t.forEach(function(t){for(var n=t.addedNodes,l=0;l<n.length;l++)if(n[l]instanceof HTMLInputElement&&n[l].hasAttribute("list"))e(n[l]);else if(n[l]instanceof HTMLOptionElement){var o=n[l].parentNode;console.log("ol added "+n[l].value+" to "+o.id);for(var i=document.querySelectorAll("input[list="+o.id+"]"),d=0;d<i.length;d++)e(i[d])}})});document.addEventListener("DOMContentLoaded",function(){for(var t=n("input[list]"),l=0;l<t.length;l++)t[l].hasAttribute("list")&&e(t[l]);i.observe(document.body,{childList:!0,subtree:!0});var d=n("datalist");console.log("found "+d.length+" datalists");for(var l=0;l<d.length;l++){var s=new o(function(e){console.log(e.target+" has muted (*)")});s.observe(d[l],{childList:!0,attributes:!0})}}),window.addEventListener("click",function(e){if(!e.target.classList.contains("nodep-dl-item"))for(var t=document.querySelectorAll(".nodep-dl-list"),n=0;n<t.length;n++)t[n].style.display="none"})}}();